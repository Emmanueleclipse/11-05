{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Rob\\\\keto-dev\\\\yonia\\\\node_modules\\\\react-native-optimized-flatlist\\\\src\\\\OptimizedFlatList.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport FlatListItem from \"./FlatListItem\";\n\nvar OptimizedFlatList = function (_React$PureComponent) {\n  _inherits(OptimizedFlatList, _React$PureComponent);\n\n  var _super = _createSuper(OptimizedFlatList);\n\n  function OptimizedFlatList(props) {\n    var _this;\n\n    _classCallCheck(this, OptimizedFlatList);\n\n    _this = _super.call(this, props);\n    _this.state = {};\n    _this.rowRefs = [];\n    _this._onViewableItemsChanged = _this._onViewableItemsChanged.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(OptimizedFlatList, [{\n    key: \"_addRowRefs\",\n    value: function _addRowRefs(ref, data) {\n      this.rowRefs[data.index] = {\n        ref: ref,\n        item: data.item,\n        index: data.index\n      };\n    }\n  }, {\n    key: \"_updateItem\",\n    value: function _updateItem(index, visibility) {\n      if (!this.rowRefs[index].ref) {\n        return false;\n      }\n\n      this.rowRefs[index].ref.setVisibility(visibility);\n      return visibility;\n    }\n  }, {\n    key: \"_renderItem\",\n    value: function _renderItem(data) {\n      var _this2 = this;\n\n      var view = this.props.renderItem(data);\n      return React.createElement(FlatListItem, {\n        ref: function ref(myItem) {\n          return _this2._addRowRefs(myItem, data);\n        },\n        viewComponent: view,\n        data: data,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 7\n        }\n      });\n    }\n  }, {\n    key: \"_onViewableItemsChanged\",\n    value: function _onViewableItemsChanged(info) {\n      var _this3 = this;\n\n      info.changed.map(function (item) {\n        return _this3._updateItem(item.index, item.isViewable);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(FlatList, _extends({}, this.props, {\n        renderItem: function renderItem(data) {\n          return _this4._renderItem(data);\n        },\n        onViewableItemsChanged: this._onViewableItemsChanged,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 7\n        }\n      }));\n    }\n  }]);\n\n  return OptimizedFlatList;\n}(React.PureComponent);\n\nexport { OptimizedFlatList as default };","map":{"version":3,"sources":["C:/Users/Rob/keto-dev/yonia/node_modules/react-native-optimized-flatlist/src/OptimizedFlatList.js"],"names":["React","FlatListItem","OptimizedFlatList","props","state","rowRefs","_onViewableItemsChanged","bind","ref","data","index","item","visibility","setVisibility","view","renderItem","myItem","_addRowRefs","info","changed","map","_updateItem","isViewable","_renderItem","PureComponent"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAIA,OAAOC,YAAP;;IAEqBC,iB;;;;;AAEnB,6BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa,EAAb;AACA,UAAKC,OAAL,GAAc,EAAd;AACA,UAAKC,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BC,IAA7B,+BAA/B;AAJiB;AAKlB;;;;WAED,qBAAYC,GAAZ,EAAiBC,IAAjB,EAAsB;AACpB,WAAKJ,OAAL,CAAaI,IAAI,CAACC,KAAlB,IAA2B;AACzBF,QAAAA,GAAG,EAAEA,GADoB;AAEzBG,QAAAA,IAAI,EAAEF,IAAI,CAACE,IAFc;AAGzBD,QAAAA,KAAK,EAAED,IAAI,CAACC;AAHa,OAA3B;AAKD;;;WAED,qBAAYA,KAAZ,EAAmBE,UAAnB,EAA8B;AACxB,UAAI,CAAC,KAAKP,OAAL,CAAaK,KAAb,EAAoBF,GAAzB,EAA8B;AAChC,eAAO,KAAP;AACD;;AACD,WAAKH,OAAL,CAAaK,KAAb,EAAoBF,GAApB,CAAwBK,aAAxB,CAAsCD,UAAtC;AACA,aAAOA,UAAP;AACD;;;WAED,qBAAYH,IAAZ,EAAiB;AAAA;;AACf,UAAMK,IAAI,GAAG,KAAKX,KAAL,CAAWY,UAAX,CAAsBN,IAAtB,CAAb;AACA,aACE,oBAAC,YAAD;AACE,QAAA,GAAG,EAAG,aAAAO,MAAM;AAAA,iBAAI,MAAI,CAACC,WAAL,CAAiBD,MAAjB,EAAyBP,IAAzB,CAAJ;AAAA,SADd;AAEE,QAAA,aAAa,EAAEK,IAFjB;AAGE,QAAA,IAAI,EAAEL,IAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAOD;;;WAED,iCAAyBS,IAAzB,EASE;AAAA;;AACAA,MAAAA,IAAI,CAACC,OAAL,CAAaC,GAAb,CAAiB,UAAAT,IAAI;AAAA,eACnB,MAAI,CAACU,WAAL,CAAiBV,IAAI,CAACD,KAAtB,EAA6BC,IAAI,CAACW,UAAlC,CADmB;AAAA,OAArB;AAGD;;;WAED,kBAAS;AAAA;;AACP,aACE,oBAAC,QAAD,eACM,KAAKnB,KADX;AAEE,QAAA,UAAU,EAAG,oBAAAM,IAAI;AAAA,iBAAI,MAAI,CAACc,WAAL,CAAiBd,IAAjB,CAAJ;AAAA,SAFnB;AAGE,QAAA,sBAAsB,EAAE,KAAKH,uBAH/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF;AAOD;;;;EA3D4CN,KAAK,CAACwB,a;;SAAhCtB,iB","sourcesContent":["import React from 'react'\nimport { \n  FlatList,\n} from 'react-native'\nimport FlatListItem from './FlatListItem'\n\nexport default class OptimizedFlatList extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {}\n    this.rowRefs =[]\n    this._onViewableItemsChanged = this._onViewableItemsChanged.bind(this)\n  }\n\n  _addRowRefs(ref, data){\n    this.rowRefs[data.index] = {\n      ref: ref,\n      item: data.item,\n      index: data.index,\n    }\n  }\n  \n  _updateItem(index, visibility){\n        if (!this.rowRefs[index].ref) {\n      return false;\n    }\n    this.rowRefs[index].ref.setVisibility(visibility)\n    return visibility\n  }\n\n  _renderItem(data){\n    const view = this.props.renderItem(data)\n    return (\n      <FlatListItem\n        ref={ myItem => this._addRowRefs(myItem, data)}\n        viewComponent={view}\n        data={data}\n      />\n    )\n  }\n\n  _onViewableItemsChanged (info: {\n      changed: Array<{\n        key: string,\n        isViewable: boolean,\n        item: any,\n        index: ?number,\n        section?: any,\n      }>\n    }\n  ) {\n    info.changed.map(item => \n      this._updateItem(item.index, item.isViewable)\n    )\n  }\n\n  render() {\n    return (\n      <FlatList\n        {...this.props}\n        renderItem={ data => this._renderItem(data) }\n        onViewableItemsChanged={this._onViewableItemsChanged}\n      />\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}